---
import { Picture } from "astro:assets";
import {
  ArrowPathIcon,
  UserGroupIcon,
  ChartBarIcon,
  CurrencyDollarIcon,
} from "@heroicons/react/20/solid";

import DealPipelineImg from "../../assets/service_features/deal_pipeline.png";
import CTAButton from "./CTAButton.astro";
import FeatureItemCard from "./FeatureItemCard.astro";

interface Props {
  title: string;
  description: string;
  image?: ImageMetadata;
  validationText: string;
  validationText2?: string;
  tagline?: string;
  description2?: string;
  features: Array<{
    name: string;
    description: string;
    icon: any;
  }>;
  challenges: Challenges[];
  solutions: Solutions[];
  impacts: Impacts[];
}

interface Challenges {
  name: string;
  description: string;
}
[];
interface Solutions {
  name: string;
  description: string;
}
[];
interface Impacts {
  name: string;
  description: string;
}
[];

const {
  title,
  description,
  image = DealPipelineImg,
  validationText,
  validationText2 = "",
  features,
  challenges,
  solutions,
  impacts,
  tagline = "",
  description2 = "",
} = Astro.props;

import {
  ExclamationCircleIcon,
  ArrowTrendingUpIcon,
  LightBulbIcon,
  EllipsisHorizontalIcon,
} from "@heroicons/react/20/solid";

function classNames(...classes: string[]): string {
  return classes.filter(Boolean).join(" ");
}

console.log("Debug Props:", {
  features,
  challenges,
  solutions,
  impacts,
});
---

<div class="bg-gray-50 py-24 sm:py-32 dark:bg-gray-900">
  <div class="mx-auto max-w-2xl px-6 lg:max-w-7xl lg:px-8">
    <h3 class="text-base/7 font-semibold text-indigo-600 dark:text-indigo-400">
      {tagline}
    </h3>
    <h2
      class="mt-2 max-w-2xl text-4xl font-semibold tracking-tight text-pretty text-gray-900 sm:text-5xl dark:text-white"
    >
      {title}
    </h2>
    <p class="my-4 font-light lg:text-xl text-status-900">
      {description}
    </p>
    <div
      class="mt-10 grid grid-cols-1 gap-4 sm:mt-16 lg:grid-cols-6 auto-rows-min items-stretch"
    >
      <div class="flex p-px lg:col-span-4">
        <div
          class="w-full overflow-hidden rounded-lg bg-white shadow-sm outline outline-black/5 max-lg:rounded-t-4xl lg:rounded-tl-4xl dark:bg-gray-800 dark:shadow-none dark:outline-white/15"
        >
          <Picture
            src={image}
            alt="feature image"
            widths={[400, 800, 1200]}
            formats={["webp", "avif", "png"]}
            class="object-cover object-bottom"
          />
        </div>
      </div>
      <div class="flex p-px lg:col-span-2">
        <div
          class="w-full overflow-hidden rounded-lg bg-white shadow-sm outline outline-black/5 lg:rounded-tr-4xl dark:bg-gray-800 dark:shadow-none dark:outline-white/15"
        >
          <FeatureItemCard
            title="Challenge"
            Icon={ExclamationCircleIcon}
            itemList={challenges}
            bgColor="bg-red-50"
          />
        </div>
      </div>
    </div>
    <div
      class="mt-10 grid grid-cols-1 gap-4 sm:mt-4 lg:grid-cols-6 items-stretch"
    >
      <div class="flex p-px lg:col-span-3">
        <div
          class="w-full overflow-hidden rounded-lg bg-white shadow-sm outline outline-black/5 lg:rounded-bl-4xl dark:bg-gray-800 dark:shadow-none dark:outline-white/15"
        >
          <FeatureItemCard
            title="Solution"
            Icon={LightBulbIcon}
            itemList={solutions}
            bgColor="bg-green-100"
          />
        </div>
      </div>
      <div class="flex p-px lg:col-span-3">
        <div
          class="w-full overflow-hidden rounded-lg bg-white shadow-sm outline outline-black/5 max-lg:rounded-b-4xl lg:rounded-br-4xl dark:bg-gray-800 dark:shadow-none dark:outline-white/15"
        >
          <FeatureItemCard
            title="Impact"
            Icon={ArrowTrendingUpIcon}
            itemList={impacts}
            bgColor="bg-status-50"
            horizontal={false}
          />
        </div>
      </div>
    </div>
  </div>

  <div>
    <p
      class="pl-8 mt-2 text-sm font-semibold tracking-tight text-pretty text-gray-900"
    >
      {validationText}
    </p>

    {
      validationText2 && (
        <p class="pl-8 mt-2 text-sm text-pretty text-gray-900">
          {validationText2}
        </p>
      )
    }
    <div class="pl-8 mt-4 flex flex-row justify-center items-center">
      <CTAButton
        href="/meetus"
        title="Talk to an Expert"
        class="text-white bg-highlight-500 hover:bg-highlight-600 focus:ring-4 focus:outline-none focus:ring-highlight-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:bg-highlight-600 dark:hover:bg-highlight-700 dark:focus:ring-highlight-800"
      >
        Talk to an Expert
      </CTAButton>
    </div>
  </div>
</div>
